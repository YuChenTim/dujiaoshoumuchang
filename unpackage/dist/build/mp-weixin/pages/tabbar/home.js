(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/home"],{"112e":function(t,o,e){"use strict";e.r(o);var i=e("e3ce"),a=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(o,t,(function(){return i[t]}))}(n);o["default"]=a.a},3440:function(t,o,e){"use strict";var i,a=function(){var t=this,o=t.$createElement;t._self._c},n=[];e.d(o,"b",(function(){return a})),e.d(o,"c",(function(){return n})),e.d(o,"a",(function(){return i}))},"594a":function(t,o,e){"use strict";var i=e("d798"),a=e.n(i);a.a},"8aaa":function(t,o,e){"use strict";e.r(o);var i=e("3440"),a=e("112e");for(var n in a)"default"!==n&&function(t){e.d(o,t,(function(){return a[t]}))}(n);e("594a");var c,s=e("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],c);o["default"]=r.exports},a454:function(t,o,e){"use strict";(function(t){e("16f4"),e("921b");i(e("66fd"));var o=i(e("8aaa"));function i(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},d798:function(t,o,e){},e3ce:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e={data:function(){return{popup:!1,tourist:!1,wxLogin:!0,activityData:[],ImgUrl:this.ImgUrl,location:[],locationIndex:0,locationId:{},space:{},popupChange:"",headShow:!1,type:{},view:{}}},onLoad:function(){this.getUser(),this.getArea(),this.getWe(),this.getSpace(),t.setStorage({key:"tourist",data:!1})},methods:{Login:function(){var o=this.WebUrl,e=this;t.login({provider:"weixin",success:function(i){var a=i.code;t.request({url:o+"/wxLogin",data:{code:a},method:"GET",header:{"content-type":"application/json"},success:function(o){console.log(o),t.setStorage({key:"openid",data:o.data.data.openid,success:function(){e.getUser()}})}})}})},getUser:function(){var o=this.WebUrl,e=this;t.getStorage({key:"openid",success:function(i){console.log(i.data),t.request({url:o+"/judgeUser",method:"POST",data:{openid:i.data},success:function(o){"用户已存在！"===o.data.msg&&(e.tourist=!0,e.wxLogin=!1,t.setStorage({key:"u_id",data:o.data.data.u_id}),t.setStorage({key:"tourist",data:!0}))}})},fail:function(t){e.Login()}})},getUserInfo:function(o){var e=this,i=this.WebUrl,a=0;for(var n in this.locationId)console.log(n),n===this.location[this.locationIndex]&&(a=this.locationId[n].id);t.getUserInfo({provider:"weixin",success:function(o){var n={nickName:o.userInfo.nickName,avatarUrl:o.userInfo.avatarUrl,gender:o.userInfo.gender,city:o.userInfo.city};t.getStorage({key:"openid",success:function(o){t.request({url:i+"/addUser",method:"POST",data:{area_id:a,city:n.city,gender:n.gender,nickName:n.nickName,avatarUrl:n.avatarUrl,openid:o.data},success:function(t){console.log(t),e.getUser()}})}})},fail:function(t){console.log(t)}})},webView:function(o){console.log(o),t.showModal({title:"该地址无法跳转",showCancel:!1})},getArea:function(){var o=this.WebUrl,e=this;t.request({url:o+"/getArea",success:function(o){o.data.data.forEach((function(t){e.location.push(t.dict_name),e.locationId[t.dict_name]={id:t.dict_id}})),e.getActivity(),e.getHot(),t.getStorage({key:"area_id",success:function(t){console.log(t)},fail:function(){console.log(o.data.data[0].dict_id),t.setStorage({key:"area_id",data:o.data.data[0].dict_id})}})}})},getWe:function(){var o=this.WebUrl,e=this;t.request({url:o+"/getWe",success:function(t){e.view=t.data.data,console.log(t.data.data),console.log("关于我们")}})},getSpace:function(){var o=this.WebUrl,e=this;t.request({url:o+"/getSpace",success:function(t){e.type=t.data.data}})},getHot:function(){var o,e=this.WebUrl,i=this;for(var a in this.locationId)console.log(a),a===this.location[this.locationIndex]&&(o=this.locationId[a].id);t.request({url:e+"/getHot",data:{area_id:o},success:function(t){i.space=t.data.data,console.log(t),console.log("aaa")}})},getActivity:function(){var o,e=this.WebUrl,i=this;for(var a in this.locationId)console.log(a),a===this.location[this.locationIndex]&&(o=this.locationId[a].id);t.request({url:e+"/getActivity",data:{area_id:o},success:function(t){i.activityData=t.data.data,console.log(i.activityData)}})},locationChange:function(o){var e;for(var i in this.locationIndex=o.target.value,this.getActivity(),this.locationId)i===this.location[this.locationIndex]&&(e=this.locationId[i].id);console.log(e),t.setStorage({key:"area_id",data:e})},aboutUsButton:function(){console.log(1),this.popup?this.popup=!1:this.popup=!0},toField:function(){t.navigateTo({url:"../home/field"})},toVisit:function(){var o=this;this.tourist?t.navigateTo({url:"../home/visit"}):t.showModal({title:"提示",content:"请先授权登录",success:function(t){t.confirm&&(o.wxLogin=!0)}})},toApply:function(){var o=this;this.tourist?t.navigateTo({url:"../home/apply"}):t.showModal({title:"提示",content:"请先授权登录",success:function(t){t.confirm&&(o.wxLogin=!0)}})},toSpace:function(o){console.log(this.space[o].infor_id),t.navigateTo({url:"../home/space?infor_id="+this.space[o].infor_id})},activity:function(o){t.navigateTo({url:"../home/activity?id="+o})},changePopup:function(){this.popup=!1},changeWxLogin:function(){!0===this.wxLogin?this.wxLogin=!1:this.wxLogin=!0}}};o.default=e}).call(this,e("543d")["default"])}},[["a454","common/runtime","common/vendor"]]]);