(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ranch/room"],{"39f7":function(e,t,o){"use strict";o.r(t);var n=o("9967"),a=o("af08");for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);o("8505");var s,r=o("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=c.exports},"76ba":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{roomImg:[],date:"2020-04-02",start:"",room:[],roomIndex:0,roomId:{},theme:"",time:["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"],chenge:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ImgUrl:this.ImgUrl,showTheme:!0,pass:0}},methods:{bindDateChange:function(e){this.date=e.target.value,this.record()},bindRoomChange:function(e){this.roomIndex=e.target.value,this.record(),this.getRoomImg()},getRoomImg:function(){var t=this.WebUrl,o=this,n="";for(var a in this.roomId)a===this.room[this.roomIndex]&&(n=this.roomId[a].id);e.getStorage({key:"area_id",success:function(a){console.log(a.data),e.request({url:t+"/getData",data:{area_id:a.data},success:function(e){console.log(e),console.log("会议室"),"请求成功!"===e.data.msg&&e.data.data.forEach((function(e,t){e.meet_id===n&&(o.roomImg=e.file_url,o.pass=e.pass)}))}})}})},getToday:function(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,n=e.getDate();o<10&&(o="0"+o),n<10&&(n="0"+n),this.date=t+"-"+o+"-"+n,this.start=t+"-"+o+"-"+n},getMeet:function(t){var o=this.WebUrl,n=this,a=0;e.getStorage({key:"area_id",success:function(i){console.log(i.data),e.request({url:o+"/getMeet",data:{area_id:i.data},success:function(e){console.log(e),e.data.data.forEach((function(e){n.room.push(e.meet_name),n.roomId[e.meet_name]={id:e.meet_id},t!==e.meet_name?a++:n.roomIndex=a})),n.record(),n.getRoomImg()}})}})},record:function(){var t=this.WebUrl,o=this,n="",a=-1,i=-1;for(var s in this.chenge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.roomId)s===this.room[this.roomIndex]&&(n=this.roomId[s].id);var r=o.room[o.roomIndex].split("");"睡"===r[0]&&"眠"===r[1]&&"舱"===r[2]?o.showTheme=!1:o.showTheme=!0,e.request({url:t+"/record",method:"POST",data:{meet_id:n,date:o.date},success:function(e){console.log(e),"请求成功!"===e.data.msg&&e.data.data.forEach((function(e){for(var t=0;t<o.time.length;t++)o.time[t]===e.begin_time&&(a=t),o.time[t]===e.end_time&&(i=t);for(var n=0;n<o.chenge.length;n++)n>=a&&n<i&&o.$set(o.chenge,n,o.chenge[n]?0:2)}))}})},reserve:function(){var t=this,o=this.WebUrl,n=this,a="",i=-1,s=-1;for(var r in this.roomId)r===this.room[this.roomIndex]&&(a=this.roomId[r].id);for(var c in this.chenge){if(console.log(this.chenge[c]),1===this.chenge[c]&&-1===i&&(i=c),-1!==i&&1!==this.chenge[c]){s=c;break}if(23==c&&1===this.chenge[c]){s=24;break}}-1===i?e.showModal({title:"提示",content:"请选择预定时间",showCancel:!1}):e.getStorage({key:"u_id",success:function(r){e.request({url:o+"/reserve",method:"POST",data:{meet_id:a,date:n.date,begin_time:t.time[i],end_time:t.time[s],theme:n.theme,u_id:r.data},success:function(t){console.log(t),"请求成功!"===t.data.msg&&(t.data.msg="预约成功"),e.showModal({title:"提示",content:t.data.msg+",门禁密码:"+n.pass,showCancel:!1,success:function(o){o.confirm&&"预约成功"===t.data.msg&&e.navigateBack({delta:1})}})}})}})},clickTime:function(t){var o=!1,n=0;if(0===this.chenge[t])for(var a=0;a<this.chenge.length;a++){if(1===this.chenge[a]){if(a===t){this.$set(this.chenge,t,1);break}if(a>t){for(var i=t;i<a;i++){if(2===this.chenge[i]){e.showModal({title:"提示",content:"不可以",showCancel:!1});break}n++}for(n;n>=0;n--)this.$set(this.chenge,a-n,1)}else{for(var s=a;s<t;s++){if(2===this.chenge[s]){e.showModal({title:"提示",content:"不可以",showCancel:!1});break}n++}for(n;n>=0;n--)console.log(this.chenge[t]),this.$set(this.chenge,t-n,1)}o=!1;break}o=!0}else if(1===this.chenge[t])for(var r=0;r<this.chenge.length;r++){if(1===this.chenge[r]){if(r===t){this.$set(this.chenge,t,0),o=!1;break}if(r>t){for(var c=t;c<r;c++){if(2===this.chenge[c]){e.showModal({title:"提示",content:"不可以",showCancel:!1});break}n++}for(n;n>=0;n--)this.$set(this.chenge,r-n,0)}else{for(var h=r;h<t;h++){if(2===this.chenge[h]){e.showModal({title:"提示",content:"不可以",showCancel:!1});break}n++}for(n;n>=0;n--)console.log(this.chenge[t]),this.$set(this.chenge,t-n,0)}o=!1;break}o=!0}else e.showModal({title:"提示",content:"该段时间已被预订,请您预约其他时间",showCancel:!1});o&&this.$set(this.chenge,t,this.chenge[t]?0:1),console.log(this.chenge)},themeValue:function(e){this.theme=e.target.value}},onLoad:function(e){this.getMeet(e.meet_name),this.getToday()}};t.default=o}).call(this,o("543d")["default"])},8505:function(e,t,o){"use strict";var n=o("ead8"),a=o.n(n);a.a},9967:function(e,t,o){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}))},af08:function(e,t,o){"use strict";o.r(t);var n=o("76ba"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},ead8:function(e,t,o){},f32a:function(e,t,o){"use strict";(function(e){o("16f4"),o("921b");n(o("66fd"));var t=n(o("39f7"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])}},[["f32a","common/runtime","common/vendor"]]]);